set-option -g default-terminal "tmux-256color"

set-option -g history-limit 50000

set-option -g mouse on
set-option -g base-index 1  # Set window base index (not pane-base-index)

set-option -g window-status-style fg=cyan,bg=colour235
set-option -g window-status-current-style fg=white,bold,bg=red

### Status bar ###
set-option -g status-left-length 50
set-option -g status-left "#[fg=yellow]#(hostname)"
set-option -ag status-left "#[fg=black](#(ifconfig | grep 'inet ' | grep -v 127.0.0.1 | awk '{print $2}'))"
set-option -ag status-left " |"

set-option -g status-right-length 60
set-option -g status-right "| "
set-option -ag status-right "#[fg=yellow] %H:%M %Y %d %b"

set-option -g status-justify centre

### Key bindings ###
bind-key r source-file ~/.config/tmux/.tmux.conf \; display "Reloaded!"

bind-key y select-window -l     # Last window
bind-key u select-window -p
bind-key o select-window -n

bind-key | split-window -h
bind-key - split-window -v

bind-key t select-layout main-vertical
bind-key b select-layout main-horizontal
bind-key g select-layout tiled

bind-key -n M-~ select-layout main-vertical \; select-pane -t top-right \; split-window -v "~/.local/bin/bpytop" \; swap-pane -U \; resize-pane -x 80 -y 24
bind-key ? new-window -t 0 \; set-window-option -t 0 remain-on-exit on \; send-keys "mdless ~/.config/tmux/help.md" \; send-keys enter

# Naivate panes with j i l and ,
bind-key j select-pane -L
bind-key l select-pane -R
bind-key i select-pane -U
bind-key , select-pane -D

# M-[1..0] Switch between windows 1-10
bind-key -n M-1 if-shell "tmux select-window -t 1" "" "new-window -t 1"
bind-key -n M-2 if-shell "tmux select-window -t 2" "" "new-window -t 2"
bind-key -n M-3 if-shell "tmux select-window -t 3" "" "new-window -t 3"
bind-key -n M-4 if-shell "tmux select-window -t 4" "" "new-window -t 4"
bind-key -n M-5 if-shell "tmux select-window -t 5" "" "new-window -t 5"
bind-key -n M-6 if-shell "tmux select-window -t 6" "" "new-window -t 6"
bind-key -n M-7 if-shell "tmux select-window -t 7" "" "new-window -t 7"
bind-key -n M-8 if-shell "tmux select-window -t 8" "" "new-window -t 8"
bind-key -n M-9 if-shell "tmux select-window -t 9" "" "new-window -t 9"
bind-key -n M-0 if-shell "tmux select-window -t 0" "" "new-window -t 0"

# M-S-[1..0] Moves the current pane to windows 1-10
bind-key -n M-! if-shell "tmux join-pane -t 1" "" "new-window -dt 1; join-pane -t 1; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-@ if-shell "tmux join-pane -t 2" "" "new-window -dt 2; join-pane -t 2; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-# if-shell "tmux join-pane -t 3" "" "new-window -dt 3; join-pane -t 3; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-$ if-shell "tmux join-pane -t 4" "" "new-window -dt 4; join-pane -t 4; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-% if-shell "tmux join-pane -t 5" "" "new-window -dt 5; join-pane -t 5; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-^ if-shell "tmux join-pane -t 6" "" "new-window -dt 6; join-pane -t 6; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-& if-shell "tmux join-pane -t 7" "" "new-window -dt 7; join-pane -t 7; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-* if-shell "tmux join-pane -t 8" "" "new-window -dt 8; join-pane -t 8; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-( if-shell "tmux join-pane -t 9" "" "new-window -dt 9; join-pane -t 9; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E
bind-key -n M-) if-shell "tmux join-pane -t 0" "" "new-window -dt 0; join-pane -t 0; select-pane -t top-left; kill-pane" \; select-layout \; select-layout -E

bind-key -n M-Q kill-pane

bind-key U run-shell "~/.config/tmux/resize.sh" # chmod +x ~/.config/tmux/resize.sh (error 126)
